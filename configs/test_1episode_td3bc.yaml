# configs/test_1episode_td3bc.yaml
# TD3+BC 테스트용 설정 (1 episode)

seed: 42
device: cpu  # 빠른 테스트를 위해 CPU 사용

# 데이터 설정
data:
  symbols: ['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'META']
  period: '2y'  # 적당한 기간
  interval: '1d'
  cache: true

# 환경 설정
env:
  initial_balance: 1000000
  transaction_cost: 0.001
  max_leverage: 1.0
  window_size: 20

# 특성 추출
feature_dim: 12

# 오프라인 학습 - TD3BC 사용
offline:
  method: 'td3bc'  # TD3+BC 사용
  epochs: 1  # 1 epoch만
  batch_size: 256

  # IQL 전용 (사용 안 함)
  expectile: 0.7
  temperature: 3.0

  # TD3+BC 전용
  bc_weight: 2.5
  policy_delay: 2
  normalize_q: true

# B-Cell (REDQ)
bcell:
  # 네트워크
  hidden_dims: [256, 256]

  # REDQ 설정 (논문 권장값)
  n_critics: 10  # 원논문 권장: N=10
  m_sample: 2
  utd_ratio: 20

  # 학습
  actor_lr: 3e-4
  critic_lr: 3e-4
  alpha_lr: 3e-4
  batch_size: 256

  # RL
  gamma: 0.99
  tau: 0.005
  alpha: 0.2

  # 위기 대응
  crisis_threshold: 0.7

  # 버퍼
  buffer_size: 100000

# T-Cell
tcell:
  contamination: 0.1
  n_estimators: 100
  window_size: 100

# Memory Cell
memory:
  capacity: 1000
  k_neighbors: 5

# 학습 설정
online_episodes: 1  # ⭐ 핵심 변경 - 1 episode만
skip_offline: false  # 오프라인도 테스트
early_stopping_patience: 20

# Ablation study
ablation:
  use_tcell: true
  use_memory: true
  use_xai: true
  offline_method: 'td3bc'  # TD3BC 명시

# 기타
log_level: 'INFO'
save_freq: 10

# 목표 메트릭
targets:
  sharpe_ratio: 1.5
  max_drawdown: 0.25
  cvar_95: -0.02

# 베이스라인 설정
baselines:
  equal_weight:
    enabled: true
  standard_sac:
    enabled: true
    n_episodes: 100
    hidden_dims: [256, 256]